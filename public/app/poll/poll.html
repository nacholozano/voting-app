<div class="poll">

	<div class="container">

		<h2>{{poll.name}}</h2>
		<section ng-hide='pollVoted()' class="vote">

			<form ng-submit='votePoll()'>

				<div class="form-group">

					<div class="radio" ng-repeat='option in poll.options'>

						<label for='option{{option._id}}'>

							<input type="radio" ng-model='$parent.optionVoteId' ng-value="option._id" id="option{{option._id}}" name="optionsRadios" required> {{option.name}}

						</label>

					</div>

					<button type='submit' class='btn btn-lg'>Submit</button>

				</div>

			</form>

		</section>

		<section ng-show='pollVoted()' class="info">

			<!--<h3>Percents</h3>-->

			<div ng-repeat='option in poll.options | orderBy: "-votes" '>

				<p class='optionPercent'>
					<span>{{option.name}}  </span>
				</p>
				<p>
					<span>Votes: {{option.votes}}</span>
					<span>Percents: {{option.votes*100/poll.totalVotes || 0 | number:2 }} %</span>
				</p>

				<div class="progress">
					<div class="progress-bar" ng-style="{'width': (option.votes*100/poll.totalVotes)+'%' }"></div>
				</div>

			</div>

			<p class="totalVotes"> Total votes: <span> {{poll.totalVotes}} </span> </p>

		</section>

		<button ng-show='isAuthor()' type='submit' class='btn btn-lg' ng-click='deletePoll(poll.id)'>Delete</button>

	</div>

</div>
